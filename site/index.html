<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Port your code to LUMI</title>
    <meta name="description" content="An interactive guide to the available paths for porting your code to LUMI, featuring Cthulhu and Lewis Carrol" />
    <meta property="og:image" content="https://www.talater.com/open-source-templates/img/cheshire_cat.jpg"/>
    <meta property="og:title" content="Explore port paths to LUMI"/>
    <meta property="og:description" content="Explore paths for porting your code to LUMI with the help of Lewis Carrol and H.P. Lovecraft"/>
    <meta property="og:url" content="https://enccs.github.io/port-to-lumi/"/>
    <meta property="og:site_name" content="Port your code to LUMI"/>
    <meta property="fb:admins" content="568390229" />
    <link rel="stylesheet" href="style/main.css">
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Ovo' rel='stylesheet' type='text/css'>
  </head>
  <body>
    <a href="#/page/1" class="cover-link">
      <div class="cover">
        <img src="img/cyoa.png" alt="Choose Your Own Adventure" class="cyoa">
        <h1>Your code and LUMI</h1>
        <h2>The many paths to exascale</h2>
        <div class="author">
            <a href="https://www.csc.fi/">CSC</a>
            and
            <a href="https://enccs.se/">ENCCS</a>
        </div>
        <img src="img/lumi-cabinet.jpg" alt="The many paths to exascale" class="cover-image">
        <footnote class="cover">
            Based on <a href="https://www.talater.com/open-source-templates">Open Source Templates</a>
        </footnote>
      </div>
    </a>

    <div class="page" id="page-1">
      <h1>Chapter 1</h1>
      <h2>Pre-Exascale Machines on the Horizon</h2>
      <img src="img/alice25a.gif">
      <p>You are sitting at your desk. Your are looking at your code: a carefully constructed masterpiece, with solid foundations and a beautiful user interface.</p>
      <p>A new fleet of (pre)-exascale machines is being built around Europe. <a href="https://www.lumi-supercomputer.eu/">LUMI is expected to deliver 550PFLOPs</a>: the most powerful of its generation.</p>
      <p>These machines will open new avenues for high-performance computing. But you wonder, is the code ready to harness these machines? And if not, how can you port it to the next generation of supercomputers?</p>
      <ul>
        <li>If your code <em>can already run on GPUs</em>, <a href="#/page/37/type/issues">turn to page 37</a>.</li>
        <li>If your code <em>cannot run on GPUs</em>, <a href="#/page/75/type/pull-requests">turn to page 75</a>.</li>
        <li>Realizing that your boss may be looking over your shoulder, you quickly hit the <a href="#" id="boss-key">BOSS key</a>.</li>
      </ul>
    </div>

    <div class="page" id="page-37">
      <div class="page-number">Page 37</div>
      <h2>A Box Full of GPUs</h2>
      <img src="img/451px-Maelstrom-Clarke.jpg">
      <p>Your code is already taking advantage of <em>GPU acceleration</em>, likely using the <a href="https://docs.nvidia.com/cuda/index.html">CUDA programming language</a> or <a href="https://www.openacc.org/">OpenACC directives</a>.</p>
      <p>The LUMI GPU partition will be powered by <a href="https://www.amd.com/en/products/server-accelerators/instinct-mi100">AMD Instinct MI100 accelerators</a>: some changes are in order!</p>
      <p>You roll up your sleeves and explore your options.</p>
      <ul>
        <li>If you write C++ <a href="#/page/38">turn to page 38</a>.</li>
        <li>If you write C <a href="#/page/38">turn to page 38</a>.</li>
        <li>If you write Fortran <a href="#/page/38">turn to page 38</a>.</li>
      </ul>
    </div>

    <div class="page" id="page-38">
      <div class="page-number">Page 38</div>
      <h2>Porting C++ Code</h2>
      <img src="img/ISO_C++_Logo.svg" height="150">
      <p>C++ is a multi-paradigm programming language. It is flexible and allows you to get performance where you need it.</p>
      <p>It enables you to build <em>high-level, zero-cost abstractions</em>.</p>
      <p>It is also a complex language: you have many options to choose from in your quest for a path to GPU acceleration.</p>
      <ul>
        <li>You are <em>adventurous</em>. You take this opportunity to rewrite your performance-critical kernels using one the <a href="#/page/39/description/bug">new high-level, parallel programming libraries</a>.</li>
        <li>You are intimately familiar with <a href="https://docs.nvidia.com/cuda/index.html">CUDA</a>. You decide to try the automated conversion tools to the <a href="#/page/39/description/feature">HIP language</a>.</li>
        <li>You are more comfortable with a framework for <em>descriptive</em> parallelism. You decide to use <a href="#/page/39/description/bug-or-feature"><code>pragma</code>-based technology</a>.</li>
      </ul>
    </div>

    <div class="page" id="page-39">
      <div class="page-number">Page 39</div>
      <h2>Porting C Code</h2>
      <img src="img/The_C_Programming_Language_logo.svg" height="150">
      <p>.</p>
      <p>C is a low-level, systems-programming language. You can be as close to the metal as you need to squeeze performance from your application.</p>
      <p>You have two options to choose from in your quest for a path to GPU acceleration.</p>
      <ul>
        <li>You are intimately familiar with <a href="https://docs.nvidia.com/cuda/index.html">CUDA</a>. You decide to try the automated conversion tools to the <a href="#/page/39/description/feature">HIP language</a>.</li>
        <li>You are more comfortable with a framework for <em>descriptive</em> parallelism. You decide to use <a href="#/page/39/description/bug-or-feature"><code>pragma</code>-based technology</a>.</li>
      </ul>
    </div>

    <div class="page" id="page-42">
      <div class="page-number">Page 42</div>
      <h2>Porting Fortran Code</h2>
      <img src="img/640px-Lochkarte_FORTRAN.jpg">
      <p>Fortran is the veteran of languages in computational sciences and engineering.</p>
      <p>You have two options to choose from in your quest for a path to GPU acceleration.</p>
      <ul>
        <li>You are intimately familiar with <a href="https://developer.nvidia.com/cuda-fortran">CUDA Fortran</a> and the <code>iso_c_binding</code> Fortran2003 standard module. You decide to try <a href="#/page/39/description/feature"><code>hipfort</code></a>.</li>
        <li>You are more comfortable with a framework for <em>descriptive</em> parallelism. You decide to use <a href="#/page/39/description/bug-or-feature"><code>pragma</code>-based technology</a>.</li>
      </ul>
    </div>

    <div class="page" id="page-98">
      <div class="page-number">Page 98</div>
      <h1>Epilogue</h1>
      <p>Your journey is complete. Your prize awaits. You are ready to return to The Hub.</p>
      <div class="file-box">
        <a href="#" class="file-name">ISSUE_TEMPLATE.md</a>
        <span class="file-description">Place this file in your repository's root directory or a .github directory</span>
      </div>
      <div class="textarea"><textarea></textarea></div>
      <p>You copy the contents of the <em>ISSUE_TEMPLATE.md</em> file, and place it in your repository.</p>
      <ul>
        <li>You decide to <a class="github-button" href="https://github.com/TalAter/open-source-templates" data-count-href="/TalAter/open-source-templates/stargazers" data-count-api="/repos/TalAter/open-source-templates#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star TalAter/open-source-templates on GitHub">Star</a> this on GitHub.</li>
        <li>"Maybe I should <a href="https://twitter.com/intent/tweet?text=A%20GitHub%20issue%20and%20pull%20request%20template%20generator%20featuring%20Cthulhu%20and%20Lewis%20Carroll%20https%3A%2F%2Fwww.talater.com%2Fopen-source-templates%2F%20via%20%40TalAter" class="twitter-share-button" data-url="https://www.talater.com/open-source-templates/" data-text="A GitHub issue and pull request template generator featuring Cthulhu and Lewis Carroll" data-via="TalAter"><img src="img/tweet.png" class="tweet" /></a> this," you say to no one in particular.</li>
        <li>You do not feel ready, you <a href="#/page/1">turn around</a> and start again.</li>
      </ul>
    </div>

    <div class="page" id="page-75">
      <div class="page-number">Page 75</div>
      <h2>Looking-glass House</h2>
      <img src="img/2book3.jpg">
      <p>You peer into the mailbox. Through it you see a confused looking person standing in an open field east of a white house.</p>
      <p>Startled, you raise your right hand to your mouth, stifling a scream. You stumble back just in time to see the person through the mailbox stumble back and raise their left hand.</p>
      <p>You regain your composure (feeling a bit silly, having just been startled by a looking glass), and approach the mailbox again.</p>
      <p>"Now, if you'll only attend," says the person visible through the mailbox, "I'll tell you all about Looking-glass House. First, there's the house you can see through the glass—that's just the same as your house, only the things go the other way."</p>
      <ul>
        <li>The bizarre person in the looking glass intrigues you, and you decide to continue the conversation. You <a href="#/page/77">turn to page 77</a>.</li>
        <li>The world spins around you, this is too much for you to deal with. You shut the mailbox and <a href="#/page/1">turn back to page 1</a>.</li>
      </ul>
    </div>

    <div class="page" id="page-77">
      <div class="page-number">Page 77</div>
      <h2>People With Issues</h2>
      <img src="img/2book33.jpg">
      <p>Looking through the mailbox, you notice that the line of people coming around the house are all carrying two envelopes. You watch as they pass by the <em>issues</em> mailbox, place one envelope there and proceed to the <em>pull requests</em> mailbox with the second.</p>
      <p>"We only accept <em>pull requests</em> after the matter has been discussed thoroughly in an <em>issue</em>" explains the person through the mailbox.</p>
      <ul>
        <li>"<a href="#/page/26/description/generic">We accept pull requests even without issues</a>", you say.</li>
        <li>You nod in agreement and say "<a href="#/page/26/description/issue-required">we also only accept pull requests after the matter has been discussed in an issue</a>".</li>
      </ul>
    </div>

    <div class="page" id="page-26">
      <div class="page-number">Page 26</div>
      <h2>Driven to Perfection</h2>
      <img src="img/2book36.jpg">
      <p>The two of you stare at each other through the looking glass. Looking closer at your mirrored companion, you begin to notice the exhaustion on their face. It is the face of a person testing every single pull request manually.</p>
      <p>"Are you OK?" you ask.</p>
      <p>Your looking glass friend sighs and lowers their gaze.</p>
      <p>"How do you test changes to your code?" they ask.</p>
      <ul>
        <li>"Easy, <a href="#/page/29/checklist/tests">my project has automated tests set up</a>," you say, beaming with pride (though the code coverage could be improved, you admit to yourself).</li>
        <li>"The hard way," you say, as you look at the worn F5 key. You <a href="#/page/29">turn to page 29</a> in shame.</li>
      </ul>
    </div>

    <div class="page" id="page-29">
      <div class="page-number">Page 29</div>
      <h2>CONTRIBUTING file</h2>
      <img src="img/2book32.jpg">
      <p>As you look more closely at the looking glass house, you begin to wonder 'how do they keep this house so tidy?'</p>
      <p>On the tree next to the looking glass house you see a notice posted. It is hard to make out the words from this distance, but you manage to make out the big red headline saying GИITUBIЯTИOƆ.</p>
      <ul>
        <li>"<a href="#/page/56/checklist/contributing">My project has a CONTRIBUTING file</a> just like that," you say.</li>
        <li>How curious, you think to yourself and <a href="#/page/56">turn to page 56</a>.</li>
      </ul>
    </div>

    <div class="page" id="page-56">
      <div class="page-number">Page 56</div>
      <h2>An Old Friend</h2>
      <img src="img/cheshire_cat.jpg">
      <p>As you gaze at the notice on the tree, you suddenly notice a huge grin hovering among the branches of the tree.</p>
      <p>You watch as the grin widens, exposing a mouthful of sharp teeth, startling you beyond words. You squeal in terror, and slam the mailbox shut.</p>
      <p>Feeling cold sweat running down your neck, you slowly turn around. You look up to lowest branches of the tree on your side of the looking glass where a Cat slowly fades into view, beginning with the grin, and ending with the tail.</p>
      <p>"How are you getting on?" says the Cat, as soon as there is mouth enough for it to speak with.</p>
      <ul>
        <li>"I feel ready to download the <a href="#/page/99">PULL_REQUEST_TEMPLATE.md</a> file", you say. You expect the cat to be confused by your words, but his grin somehow widens even more.</li>
        <li>The cat couldn't have just talked, could it? You feel faint. Your eyes close and you find yourself slipping away. You wake up hours later, <a href="#/page/1">back where you started</a>.</li>
      </ul>
    </div>

    <div class="page" id="page-99">
      <div class="page-number">Page 99</div>
      <h1>Epilogue</h1>
      <p>Your journey is complete. Your prize awaits. You are ready to return to The Hub.</p>
      <div class="file-box">
        <a href="#" class="file-name">PULL_REQUEST_TEMPLATE.md</a>
        <span class="file-description">Place this file in your repository's root directory or a .github directory</span>
      </div>
      <div class="textarea"><textarea></textarea></div>
      <p>You copy the contents of the <em>PULL_REQUEST_TEMPLATE.md</em> file, placing it in your repository.</p>
      <ul>
        <li>You decide to <a class="github-button" href="https://github.com/TalAter/open-source-templates" data-count-href="/TalAter/open-source-templates/stargazers" data-count-api="/repos/TalAter/open-source-templates#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star TalAter/open-source-templates on GitHub">Star</a> this on GitHub.</li>
        <li>"Maybe I should <a href="https://twitter.com/intent/tweet?text=A%20GitHub%20issue%20and%20pull%20request%20template%20generator%20featuring%20Cthulhu%20and%20Lewis%20Carroll%20https%3A%2F%2Fwww.talater.com%2Fopen-source-templates%2F%20via%20%40TalAter" class="twitter-share-button" data-url="https://www.talater.com/open-source-templates/" data-text="A GitHub issue and pull request template generator featuring Cthulhu and Lewis Carroll" data-via="TalAter"><img src="img/tweet.png" class="tweet" /></a> this," you say to no one in particular.</li>
        <li>You decide to start over and <a href="#/page/1">turn back to page 1</a>.</li>
      </ul>
    </div>

    <script src="//code.jquery.com/jquery-1.12.0.min.js"></script>
    <script src="https://rawgit.com/flatiron/director/master/build/director.min.js"></script>
    <script src="js/main.js"></script>
    <script src="js/download.min.js"></script>
    <script async defer id="github-bjs" src="https://buttons.github.io/buttons.js"></script>
  </body>
</html>
